<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOMIA // DATA_MATRIX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FFFFFF;
            --bg: #000000;
        }

        body {
            background-color: var(--bg);
            color: var(--primary);
            font-family: 'JetBrains Mono', monospace;
            margin: 0;
            overflow: hidden;
            height: 100vh;
            text-transform: uppercase;
        }

        .terminal-panel {
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        .scanlines {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.2) 50%);
            background-size: 100% 4px;
            opacity: 0.3;
        }

        .status-tag {
            font-size: 0.6rem;
            padding: 2px 10px;
            border: 1px solid currentColor;
            letter-spacing: 0.1em;
        }

        .invert-logic {
            background-color: var(--primary) !important;
            color: var(--bg) !important;
            border-color: var(--primary) !important;
        }

        .sparkline {
            width: 100%;
            height: 40px;
            stroke: #fff;
            stroke-width: 1.5;
            fill: none;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            font-size: 10px;
        }

        td,
        th {
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px;
            text-align: left;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease-out;
            pointer-events: none;
        }

        .loading-bar-container {
            width: 150px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .loading-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: repeating-linear-gradient(90deg, #fff 0, #fff 10px, transparent 10px, transparent 12px);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            transition: width 2.5s cubic-bezier(0.22, 1, 0.36, 1);
        }
    </style>
</head>

<body x-data="dataMatrix()" style="overflow-y: auto;">
    <div class="overlay scanlines"></div>

    <!-- Cinematic Loading Overlay -->
    <div class="loading-overlay" :class="isLoading ? 'opacity-100' : 'opacity-0'">
        <div class="text-xs font-bold tracking-[0.5em] animate-pulse">DECRYPTING_DATA_STREAM...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" :style="isLoading ? 'width: 100%' : 'width: 0%'"></div>
        </div>
        <div class="text-[8px] opacity-40 mt-2 tracking-widest">ANALYZING_TELEMETRY</div>
    </div>

    <div class="relative z-10 min-h-screen flex flex-col p-6 space-y-6">
        <header class="flex-shrink-0 flex justify-between items-start">
            <div class="flex items-end gap-8">
                <div class="flex flex-col">
                    <div class="text-[0.5rem] tracking-[1em] opacity-30 mb-1 ml-1">DEEP_DATA_ANALYTICS</div>
                    <h1 class="text-6xl font-black tracking-[-0.05em] leading-none">V1-RG</h1>
                </div>
                <div class="h-12 w-[1px] bg-white/10 mb-1"></div>
                <div class="space-y-3 mb-1">
                    <div class="flex items-center gap-4">
                        <span class="text-lg font-black tracking-[0.2em]">DATA_MATRIX</span>
                        <div class="w-12 h-[1px] bg-white/20"></div>
                    </div>
                </div>
            </div>

            <nav class="flex gap-2">
                <a href="live.html"
                    class="status-tag border-white/20 hover:bg-white hover:text-black transition-all">[01: TERMINAL]</a>
                <a href="data.html" class="status-tag invert-logic">[02: DATA_MATRX]</a>
                <a href="index.html"
                    class="status-tag border-red-500/50 text-red-500 hover:bg-red-500 hover:text-black transition-all">[03:
                    SYS_EXIT]</a>
            </nav>
        </header>

        <main class="flex-grow grid grid-cols-12 gap-6 overflow-hidden">
            <!-- Telemetry Matrix -->
            <div class="col-span-8 grid grid-cols-3 gap-6 auto-rows-min">
                <div class="terminal-panel p-6 flex flex-col justify-between h-32 relative group overflow-hidden">
                    <div class="relative z-10 pointer-events-none">
                        <span class="text-[8px] opacity-40 tracking-widest">ULTRA_DISTANCE</span>
                        <div class="flex items-baseline gap-2">
                            <span class="text-5xl font-black" x-text="telemetry.ultra_dist"></span>
                            <span class="text-[10px] opacity-30">mm</span>
                        </div>
                    </div>
                    <div class="absolute inset-0 top-8 opacity-60">
                        <svg class="sparkline" preserveAspectRatio="none" viewBox="0 0 100 40">
                            <defs>
                                <linearGradient id="grad-dist" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fff;stop-opacity:0.2" />
                                    <stop offset="100%" style="stop-color:#fff;stop-opacity:0" />
                                </linearGradient>
                            </defs>
                            <path :d="sparklines.distFill" fill="url(#grad-dist)" stroke="none"></path>
                            <path :d="sparklines.distPath" fill="none" stroke="#fff" stroke-width="0.8"
                                vector-effect="non-scaling-stroke"></path>
                        </svg>
                    </div>
                </div>
                <div class="terminal-panel p-6 flex flex-col justify-between h-32 relative group overflow-hidden">
                    <div class="relative z-10 pointer-events-none">
                        <span class="text-[8px] opacity-40 tracking-widest">CPU_TEMP_LOAD</span>
                        <div class="flex items-baseline gap-2">
                            <span class="text-5xl font-black" x-text="telemetry.cpu_temp"></span>
                            <span class="text-[10px] opacity-30">°C</span>
                        </div>
                    </div>
                    <div class="absolute inset-0 top-8 opacity-60">
                        <svg class="sparkline" preserveAspectRatio="none" viewBox="0 0 100 40">
                            <defs>
                                <linearGradient id="grad-cpu" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fff;stop-opacity:0.2" />
                                    <stop offset="100%" style="stop-color:#fff;stop-opacity:0" />
                                </linearGradient>
                            </defs>
                            <path :d="sparklines.cpuFill" fill="url(#grad-cpu)" stroke="none"></path>
                            <path :d="sparklines.cpuPath" fill="none" stroke="#fff" stroke-width="0.8"
                                vector-effect="non-scaling-stroke"></path>
                        </svg>
                    </div>
                </div>
                <div class="terminal-panel p-6 flex flex-col justify-between h-32">
                    <span class="text-[8px] opacity-40 tracking-widest">SYS_UPTIME</span>
                    <div class="flex items-baseline gap-2">
                        <span class="text-3xl font-black" x-text="telemetry.uptime"></span>
                    </div>
                    <div class="text-[8px] text-green-500 opacity-60">STATUS: NOMINAL</div>
                </div>

                <!-- Hardware Specs Table -->
                <div class="col-span-3 terminal-panel p-6">
                    <span class="text-xs font-bold tracking-widest mb-4 block">HARDWARE_SPECS_MATRIX</span>
                    <table>
                        <tr>
                            <th>COMPONENT</th>
                            <th>VALUE</th>
                            <th>STATE</th>
                        </tr>
                        <tr>
                            <td>MCU</td>
                            <td>ESP32-C3</td>
                            <td class="text-green-500">[ OK ]</td>
                        </tr>
                        <tr>
                            <td>MAIN_PROC</td>
                            <td>RPi5_4GB</td>
                            <td class="text-green-500">[ OK ]</td>
                        </tr>
                        <tr>
                            <td>LIPO_V</td>
                            <td x-text="telemetry.volt">--</td>
                            <td>[ ACTIVE ]</td>
                        </tr>
                        <tr>
                            <td>I/O_GPIO_01</td>
                            <td>HIGH</td>
                            <td class="text-green-500">[ NOMINAL ]</td>
                        </tr>
                        <tr>
                            <td>I2C_ADDR</td>
                            <td>0x3C</td>
                            <td class="text-green-500">[ SYNCED ]</td>
                        </tr>
                    </table>
                </div>

                <!-- Control Trace -->
                <div class="col-span-3 terminal-panel p-6 h-48 flex flex-col">
                    <span class="text-xs font-bold tracking-widest mb-4 block">RAW_DATA_STREAM_TERMINAL</span>
                    <div class="flex-grow overflow-y-auto font-mono text-[9px] opacity-60 space-y-1 scrollbar-hide"
                        id="log-container">
                        <template x-for="log in telemetry.logs">
                            <div class="flex gap-2">
                                <span class="opacity-30">></span>
                                <span x-text="log"></span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- Technical Blueprint -->
            <div
                class="col-span-4 terminal-panel relative overflow-hidden flex items-center justify-center bg-white/[0.02]">
                <div class="absolute inset-0 opacity-10 pointer-events-none"
                    style="background-image: radial-gradient(circle, white 1px, transparent 1px); background-size: 30px 30px;">
                </div>
                <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                    <video class="w-full h-full object-contain opacity-80 mix-blend-screen" autoplay muted loop
                        playsinline>
                        <source src="/assets/hologram_overlay2.mp4" type="video/mp4">
                    </video>
                    <!-- Tactical Corners -->
                    <div class="absolute top-4 left-4 w-6 h-6 border-t font-thin border-l border-white/30"></div>
                    <div class="absolute top-4 right-4 w-6 h-6 border-t font-thin border-r border-white/30"></div>
                    <div class="absolute bottom-4 left-4 w-6 h-6 border-b font-thin border-l border-white/30"></div>
                    <div class="absolute bottom-4 right-4 w-6 h-6 border-b font-thin border-r border-white/30"></div>

                    <div class="absolute bottom-6 text-[8px] tracking-[.5em] opacity-40">TECHNICAL_BLUEPRINT_VIEW</div>
                </div>
            </div>
        </main>

        <footer
            class="flex-shrink-0 border-t border-white/10 pt-4 flex justify-between items-center text-[8px] opacity-30 tracking-widest">
            <span>UNAUTHORIZED_ACCESS_PROHIBITED</span>
            <span>PHANTOM_DATA_MATRIX_V1.0</span>
            <span x-text="new Date().toISOString()"></span>
        </footer>
    </div>

    <script>
        function dataMatrix() {
            return {
                telemetry: { cpu_temp: 45, uptime: '00:00:00', ultra_dist: 120, volt: '11.1V', logs: [] },
                sparklines: { distPath: '', distFill: '', cpuPath: '', cpuFill: '' },
                history: { dist: Array(50).fill(20), cpu: Array(50).fill(20) }, // Pre-fill with middle value
                isLoading: false,
                startTime: Date.now(),
                init() {
                    // Start Loading Sequence
                    this.isLoading = true;
                    setTimeout(() => {
                        this.isLoading = false;
                    }, 2500);

                    setInterval(() => {
                        // More organic data simulation
                        const time = Date.now() / 1000;
                        const distBase = 150 + Math.sin(time) * 50;
                        const distNoise = (Math.random() - 0.5) * 40;
                        this.telemetry.ultra_dist = Math.floor(Math.max(0, distBase + distNoise));

                        const cpuBase = 45 + Math.cos(time * 0.5) * 5;
                        const cpuNoise = (Math.random() - 0.5) * 4;
                        this.telemetry.cpu_temp = Math.floor(Math.max(0, cpuBase + cpuNoise));

                        this.telemetry.uptime = new Date(Date.now() - this.startTime).toISOString().substr(11, 8);

                        this.updateSparkline('dist', this.mapValue(this.telemetry.ultra_dist, 0, 300, 40, 0));
                        this.updateSparkline('cpu', this.mapValue(this.telemetry.cpu_temp, 30, 70, 40, 0));

                        this.telemetry.logs.push(`TELEMETRY_SYNC: ${this.telemetry.ultra_dist}mm | ${this.telemetry.cpu_temp}°C`);
                        if (this.telemetry.logs.length > 30) this.telemetry.logs.shift();

                        this.$nextTick(() => {
                            const c = document.getElementById('log-container');
                            if (c) c.scrollTop = c.scrollHeight;
                        });
                    }, 100); // Faster update rate for smoother graph
                },
                updateSparkline(key, val) {
                    this.history[key].push(val);
                    if (this.history[key].length > 50) this.history[key].shift();

                    const points = this.history[key].map((v, i) => {
                        const x = (i / (this.history[key].length - 1)) * 100;
                        return `${x},${v}`;
                    });

                    this.sparklines[key + 'Path'] = `M ${points.join(' L ')}`;
                    this.sparklines[key + 'Fill'] = `M ${points.join(' L ')} L 100,40 L 0,40 Z`;
                },
                mapValue(v, inMin, inMax, outMin, outMax) {
                    return (v - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
                }
            }
        }
    </script>
</body>

</html>